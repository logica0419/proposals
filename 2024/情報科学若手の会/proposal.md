# 「認証認可」という体験をデザインする ～Nekko Cloud認証認可基盤計画

## Status

### 🎉 Accepted

## キーワード

クラウド、自作、認証認可、OIDC、Kubernetes、Sidecarコンテナ、Gateway API

## 発表概要

我々ネッコ研では、複数のメンバーが所有する自宅サーバーをVPNで繋ぎ、その上にプライベートクラウドを構築するプロジェクト「Nekko Cloud」を進めています。  

一般のクラウドにおいて認証認可は避けて通れない要素ですが、安全性や利便性を求めるとAWSのIAMのように仕様が膨大になってしまい、設計が難しくなります。  
しかしながら、Nekko Cloudは1サークル内で提供されるサービスですので、順序立てて考えれば要件を絞ることができます。  
最終的に我々は、DiscordのOAuthでのみログインできる自作メンバーポータルにOIDC Providerの機能を付けることで、認可したサービスにのみ認証情報を"プロキシ"する形のフローを採用しました。

本セッションでは、我々がどのように状況を整理し、何を主目的として定めたのか、そして設計した認証認可基盤計画の全貌をお伝えします。

## 備考・補足など

アジェンダはこちらです。

- ネッコ研の現状
  - Discordに統一されたコミュニケーション
  - 使いたい認証認可の形
  - 求められる権限管理
- 認証ポータルの設計
  - 統合認証ポータル
  - OIDC ProviderとProvider主体の権限管理
- 基盤上で認証認可を挟む
  - HTTP通信におけるプロキシ型認証認可
  - Ingress Controllerで見る認証認可の実装
  - Gateway APIとプロキシ型認証認可
  - サイドカー式認証認可の提案
  - nekko-auth operator計画
- 終わりに
